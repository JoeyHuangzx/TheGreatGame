
## 前言

    LUA：一切皆table

## 基础

1. lua面向对象编程是基于元表metatable，元方法__index来实现的
2. lua中的函数默认都是有self传递进去的，self相当于C++类中函数的this指针，会自动给我们传递 self
3. 设置A为B的元表时setmetatable(A,B)，B的元方法__index一定要赋值B.__index = B,(lua并不是直接在表B中查找变量a，而是调用表B的元方法__index，如果__index为nil，那就会返回nil),如果__index被赋值为一个函数，那么查找时就会返回该函数的返回值
4.  **冒号和点调用方法的区别**：使用冒号：可以将自身（self）自动传过去不需要写进方法参数里   **(a.test())**，使用点则需要将主动传自身过去 **(a.test(a))**。
5. lua中self的用法：
    * 冒号：在定义时省略了self
    * 点号：在定义时不省略self
    * 点号(.)作为静态方法来看待
    * 冒号(:)作为成员方法来看待

### 元表的查找步骤
- 步骤1、在表中查找，如果找到，返回该元素，找不到则继续步骤2
- 步骤2、判断该表是否有元表，如果没有元表，返回nil，有元表则继续步骤3
- 步骤3、判断元表有没有__index方法，如果__index方法为nil，则返回nil；如果__index方法是一个表，则重复步骤1、2、3；如果__index方法是一个函数，则调用该函数，并返回该函数的返回值